"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var LoggerService = require("../shared/logger/LoggerService");
var mailchimp_mailer_service_1 = require("./mailchimp-mailer.service");
var CronJob = require('cron').CronJob;
var config = require('config');
var _loggerService = new LoggerService('MAILCHIMP_MAILER_SERVICE');
var CronJobService = (function () {
    function CronJobService() {
    }
    CronJobService.prototype.OnCronJobStart = function () {
        var mailChimpMailerService = new mailchimp_mailer_service_1.MailChimpMailerService();
        var sendingMailOnProfileUpdate = new CronJob('00 30 00 * * 0-6', function () {
            mailChimpMailerService.onCronJobCandidateProfileTriggered(2, config.get('TplSeed.mail.CANDIDATE_PROFILE_SUBMIT_25%_LISTID'));
            mailChimpMailerService.onCronJobCandidateProfileTriggered(3, config.get('TplSeed.mail.CANDIDATE_PROFILE_SUBMIT_50%_LISTID'));
        }, null, false, 'Asia/Kolkata');
        sendingMailOnProfileUpdate.start();
    };
    return CronJobService;
}());
exports.CronJobService = CronJobService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9mcmFtZXdvcmsvc2VydmljZXMvY3Jvbi1qb2Iuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhEQUFpRTtBQUNqRSx1RUFBb0U7QUFFcEUsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUN0QyxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsSUFBSyxjQUFjLEdBQWtCLElBQUksYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFJbkY7SUFBQTtJQVVBLENBQUM7SUFSQyx1Q0FBYyxHQUFkO1FBQ0UsSUFBSSxzQkFBc0IsR0FBQyxJQUFJLGlEQUFzQixFQUFFLENBQUM7UUFDeEQsSUFBSSwwQkFBMEIsR0FBRyxJQUFJLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRTtZQUMvRCxzQkFBc0IsQ0FBRSxrQ0FBa0MsQ0FBQyxDQUFDLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxrREFBa0QsQ0FBQyxDQUFDLENBQUM7WUFDN0gsc0JBQXNCLENBQUUsa0NBQWtDLENBQUMsQ0FBQyxFQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0RBQWtELENBQUMsQ0FBQyxDQUFDO1FBQzdILENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pDLDBCQUEwQixDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFDSCxxQkFBQztBQUFELENBVkEsQUFVQyxJQUFBO0FBVlksd0NBQWMiLCJmaWxlIjoiYXBwL2ZyYW1ld29yay9zZXJ2aWNlcy9jcm9uLWpvYi5zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlclNlcnZpY2UgPSByZXF1aXJlKCcuLi9zaGFyZWQvbG9nZ2VyL0xvZ2dlclNlcnZpY2UnKTtcclxuaW1wb3J0IHsgTWFpbENoaW1wTWFpbGVyU2VydmljZSB9IGZyb20gJy4vbWFpbGNoaW1wLW1haWxlci5zZXJ2aWNlJztcclxuXHJcbnZhciBDcm9uSm9iID0gcmVxdWlyZSgnY3JvbicpLkNyb25Kb2I7XHJcbnZhciBjb25maWcgPSByZXF1aXJlKCdjb25maWcnKTtcclxudmFyICBfbG9nZ2VyU2VydmljZTogTG9nZ2VyU2VydmljZSA9IG5ldyBMb2dnZXJTZXJ2aWNlKCdNQUlMQ0hJTVBfTUFJTEVSX1NFUlZJQ0UnKTtcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENyb25Kb2JTZXJ2aWNlIHtcclxuXHJcbiAgT25Dcm9uSm9iU3RhcnQoKSB7XHJcbiAgICB2YXIgbWFpbENoaW1wTWFpbGVyU2VydmljZT1uZXcgTWFpbENoaW1wTWFpbGVyU2VydmljZSgpO1xyXG4gICAgdmFyIHNlbmRpbmdNYWlsT25Qcm9maWxlVXBkYXRlID0gbmV3IENyb25Kb2IoJzAwIDMwIDAwICogKiAwLTYnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIG1haWxDaGltcE1haWxlclNlcnZpY2UuIG9uQ3JvbkpvYkNhbmRpZGF0ZVByb2ZpbGVUcmlnZ2VyZWQoMixjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuQ0FORElEQVRFX1BST0ZJTEVfU1VCTUlUXzI1JV9MSVNUSUQnKSk7XHJcbiAgICAgIG1haWxDaGltcE1haWxlclNlcnZpY2UuIG9uQ3JvbkpvYkNhbmRpZGF0ZVByb2ZpbGVUcmlnZ2VyZWQoMyxjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuQ0FORElEQVRFX1BST0ZJTEVfU1VCTUlUXzUwJV9MSVNUSUQnKSk7XHJcbiAgICAgIH0sIG51bGwsIGZhbHNlLCdBc2lhL0tvbGthdGEnKTtcclxuICAgIHNlbmRpbmdNYWlsT25Qcm9maWxlVXBkYXRlLnN0YXJ0KCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==
